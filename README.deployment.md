# Инструкция по развертыванию приложения

## Требования
- Docker
- Docker Compose

## Структура поставки
Приложение поставляется в виде трех Docker-контейнеров:
1. **db** - контейнер с базой данных SQLite
2. **server** - контейнер с серверной частью приложения
3. **client** - контейнер с клиентской частью приложения
4. **tests** - контейнер для запуска тестов

## Файловая структура
```
├── Dockerfile.client       # Dockerfile для клиентской части
├── Dockerfile.server       # Dockerfile для серверной части
├── Dockerfile.tests        # Dockerfile для запуска тестов
├── database.sqlite         # Файл базы данных SQLite
├── docker-compose.yml      # Конфигурация Docker Compose
├── nginx.conf              # Конфигурация Nginx
├── package.json            # Зависимости проекта
├── package-lock.json       # Фиксированные версии зависимостей
├── server.js               # Основной файл серверной части
└── src/                    # Исходный код приложения
```

## Шаги по развертыванию

### 1. Клонирование репозитория
```bash
git clone <URL репозитория>
cd <папка проекта>
```

### 2. Запуск приложения
Запустите все контейнеры с помощью Docker Compose:
```bash
docker-compose up -d
```

Это запустит контейнеры:
- **kursovaya-db**: контейнер с базой данных
- **kursovaya-server**: контейнер с API-сервером (порт 3000)
- **kursovaya-client**: контейнер с клиентской частью (порт 80)

### 3. Проверка работоспособности
После запуска приложение будет доступно по следующим адресам:
- **Клиентская часть**: http://localhost
- **API-сервер**: http://localhost:3000

### 4. Запуск тестов
Для запуска тестов используйте:
```bash
docker-compose run tests
```

Вы также можете запускать определенные наборы тестов:
```bash
# Запуск только серверных тестов
docker-compose run tests npm run test:server

# Запуск только клиентских тестов
docker-compose run tests npm run test:client

# Запуск тестов в режиме наблюдения (для разработки)
docker-compose run tests npm run test:watch
```

### 5. Остановка приложения
Для остановки и удаления контейнеров выполните:
```bash
docker-compose down
```

## Дополнительная информация

### Данные
Данные базы данных сохраняются в файл `database.sqlite`, который монтируется как том в контейнеры. Это обеспечивает сохранность данных между перезапусками контейнеров.

### Логи
Для просмотра логов контейнеров используйте:
```bash
# Логи всех контейнеров
docker-compose logs

# Логи конкретного контейнера
docker-compose logs client
docker-compose logs server
docker-compose logs db
docker-compose logs tests
```

### Обновление приложения
Для обновления приложения до новой версии:
```bash
git pull                   # Получить обновления из репозитория
docker-compose down        # Остановить контейнеры
docker-compose up -d --build  # Пересобрать и запустить контейнеры
``` 